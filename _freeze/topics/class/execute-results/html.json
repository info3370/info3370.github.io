{
  "hash": "dcb7c013ca4efd7beb858598d35e6d25",
  "result": {
    "markdown": "---\ntitle: \"Class\"\n---\n\n\nSocial class is a concept with many definitions: ownership of capital, position within the power relations of economic production, ways of being that are tied to one's upbringing, etc. We will not cover class in depth. With a few examples, we will discuss some ways to study class using data science.\n\nThe structure of this page is first material for discussion, then material for the corresponding lecture which followed discussion.\n\n## Exercise: Subjective class identifications\n\nHow do people think about social class? In repeated surveys back to 1972, the [General Social Survey](https://gssdataexplorer.norc.org/MyGSS) has asked respondents:\n\n> If you were asked to use one of four names for your social \nclass, which would you say you belong in: the lower class, the \nworking class, the middle class, or the upper class?\n\nHow would you answer this question? How do you think most Americans would answer it?\n\nIn discussion, we will work with a prepared dataset that contains the answers to this question and a few others. You can see the documentation to see what the values mean in the [GSS Data Explorer](https://gssdataexplorer.norc.org). You also might find other variables there to use in your final project! See the video below for an intro to the GSS.\n\n{{< video https://www.youtube.com/embed/-sOcDPrytkY\n >}}\n \n To jump straight into our [prepared data file](../data/gss.csv), run this line of code.\n \n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngss <- read_csv(\"https://info3370.github.io/data/gss.csv\")\n```\n:::\n\n\nThe data contain a series of variables. Our exercise will focus on the following, each of which links to the documentation.\n\n- [`wtssall`](https://gssdataexplorer.norc.org/variables/5595/vshow) is the survey weight\n- [`class`](https://gssdataexplorer.norc.org/variables/568/vshow) is the answer to the survey question above\n- [`padeg`](https://gssdataexplorer.norc.org/variables/60/vshow) and [`madeg`](https://gssdataexplorer.norc.org/variables/61/vshow) are the highest degree attained by the respondent's father and mother, respectively\n- [`degree`](https://gssdataexplorer.norc.org/variables/59/vshow) is the respondent's highest degree attained\n- [`age`](https://gssdataexplorer.norc.org/variables/53/vshow) is the respondent's age at the time of the survey\n\nWe will use these data to estimate:\n\n- the distribution of subjective social class among Americans age 25+\n- how that varies across those with and without a college degree\n- and across the four subgroups defined by the respondent's degree and whether at least one of the respondent's parents had a college degree\n\nThe code below helps with some data preparation steps to get you started.\n\n### Restrict the sample\n\nWe want to restrict to our target population, and to those with valid responses on the relevant variables. We want to report the number of cases remaining after each restriction, in the interest of transparency. Here is a custom function that can be included in your piped sequence to report the sample size.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint_rows <- function(.data, comment = \"cases remain\") {\n  print(paste(prettyNum(nrow(.data), big.mark = \",\"), comment))\n  return(.data)\n}\n```\n:::\n\n\nAs with all canned functions like `mutate` and `summarize`, the first argument is the dataset. The second argument is a comment to say why a restriction occurred. The function prints the comment and the number of cases that remain. Then, it returns the dataset unchanged.\n\nThere are many ways to track sample restrictions---this is just one custom way! Below is code that restricts our data and reports sample sizes using this function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngss_restricted <- gss |>\n  filter(wtssall > 0) |>\n  print_rows(comment = \"have positive weights\") |>\n  filter(padeg >= 0 & madeg >= 0) |>\n  print_rows(comment = \"are age 25+\") |>\n  filter(age >= 25) |>\n  print_rows(comment = \"have valid parents' degree\") |>\n  filter(degree >= 0) |>\n  print_rows(comment = \"have valid own degree\") |>\n  filter(class %in% 1:4) |>\n  print_rows(comment = \"have valid own subjective class\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"64,814 have positive weights\"\n[1] \"45,815 are age 25+\"\n[1] \"41,141 have valid parents' degree\"\n[1] \"41,076 have valid own degree\"\n[1] \"39,878 have valid own subjective class\"\n```\n:::\n:::\n\n\n### Prepare the variables\n\nThe variables as downloaded are coded in numbers. The code below converts them to intuitive labels.\n\n- `parent_college` will be a logical variable coded `TRUE` if at least one parent finished a four-year degree and `FALSE` otherwise\n- `respondent_college` will be a logical variable coded `TRUE` if the respondent finished a four-year degree and `FALSE` otherwise\n- `class` will be recoded to be a factor variable with character labels\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngss_prepared <- gss_restricted |>\n  mutate(\n    parent_college = padeg >= 3 | madeg >= 3,\n    respondent_college = degree >= 3,\n    class = factor(class, labels = c(\"Lower class\",\"Working class\",\"Middle class\",\"Upper class\"))\n  ) |>\n  select(parent_college, respondent_college, class, wtssall)\n```\n:::\n\n\n### Produce visualizations\n\nNow answer the questions that motivated this data analysis:\n\n1. what is the distribution of self-identified social class?\n2. what is the distribution among those with and without a degree?\n3. what is the distribution in (2) further subdivided by whether at least one parent held a degree?\n\n### Worked answers to discussion activity\n\nThe code below summarizes the distribution self-identified social class.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngss |>\n  # drop cases with invalid outcome or negative weight\n  filter(class > 0 & class < 5 & wtssall > 0) |>\n  # calculate total weight within each class\n  group_by(class) |>\n  summarize(prop = sum(wtssall), .groups = \"drop\") |>\n  # convert to proportion of total across all classes\n  mutate(prop = prop / sum(prop)) |>\n  ggplot(aes(x = class, y = prop)) +\n  geom_bar(stat = \"identity\") +\n  geom_text(aes(y = .005, label = scales::label_percent(accuracy = 1)(prop)), color = \"white\",\n            vjust = 0) +\n  scale_x_continuous(\n    breaks = 1:4,\n    labels = c(\"Lower\\nClass\",\"Working\\nClass\",\"Middle\\nClass\",\"Upper\\nClass\")\n  ) +\n  ylab(\"Proportion Identifying with Each Class\") +\n  xlab(\"Class\")\n```\n\n::: {.cell-output-display}\n![](class_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nThe code below summarizes the distribution self-identified social class among those with and without a college degree.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngss |>\n  # drop cases with invalid outcome, predictor, or negative weight\n  filter(class > 0 & class < 5) |>\n  filter(degree %in% 0:4) |>\n  filter(wtssall > 0) |>\n  # create indicator of collge degree\n  # see codes at https://gssdataexplorer.norc.org/variables/59/vshow\n  mutate(college = case_when(\n    degree %in% 3:4 ~ \"Holds a Four-Year Degree\",\n    degree %in% 0:2 ~ \"No Four-Year Degree\",\n  )) |>\n  # calculate total weight within each class\n  group_by(college, class) |>\n  summarize(prop = sum(wtssall), .groups = \"drop_last\") |>\n  # convert to proportion of total across all classes within college degrees\n  group_by(college) |>\n  mutate(prop = prop / sum(prop)) |>\n  ggplot(aes(x = class, y = prop)) +\n  facet_wrap(~college) +\n  geom_bar(stat = \"identity\") +\n  geom_text(aes(label = scales::label_percent(accuracy = 1)(prop)),\n            vjust = -.2) +\n  scale_x_continuous(\n    breaks = 1:4,\n    labels = c(\"Lower\\nClass\",\"Working\\nClass\",\"Middle\\nClass\",\"Upper\\nClass\")\n  ) +\n  ylab(\"Proportion Identifying with Each Class\") +\n  ylim(c(0,1)) +\n  xlab(\"Class\")\n```\n\n::: {.cell-output-display}\n![](class_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nThe code below summarizes the class distribution by own and parents' degree attainment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngss |>\n  # drop cases with invalid outcome, predictor, or negative weight\n  filter(class > 0 & class < 5) |>\n  filter(degree %in% 0:4) |>\n  filter(padeg %in% 0:4 | madeg %in% 0:4) |>\n  filter(wtssall > 0) |>\n  # create indicator of collge degree\n  # see codes at https://gssdataexplorer.norc.org/variables/59/vshow\n  mutate(child_college = case_when(\n    degree %in% 3:4 ~ \"Respondent Has a Four-Year Degree\",\n    degree %in% 0:2 ~ \"Respondent Has No Four-Year Degree\",\n  )) |>\n  mutate(parent_college = case_when(\n    padeg %in% 3:4 | madeg %in% 3:4 ~ \"Parent Has a Four-Year Degree\",\n    T ~ \"No Parent Has No Four-Year Degree\",\n  )) |>\n  # calculate total weight within each class\n  group_by(parent_college, child_college, class) |>\n  summarize(prop = sum(wtssall), .groups = \"drop_last\") |>\n  # convert to proportion of total across all classes within college degrees\n  group_by(parent_college, child_college) |>\n  mutate(prop = prop / sum(prop)) |>\n  ggplot(aes(x = class, y = prop)) +\n  facet_grid(parent_college ~ child_college) +\n  geom_bar(stat = \"identity\") +\n  geom_text(aes(label = scales::label_percent(accuracy = 1)(prop)),\n            vjust = -.2) +\n  scale_x_continuous(\n    breaks = 1:4,\n    labels = c(\"Lower\\nClass\",\"Working\\nClass\",\"Middle\\nClass\",\"Upper\\nClass\")\n  ) +\n  ylab(\"Proportion Identifying with Each Class\") +\n  ylim(c(0,1)) +\n  xlab(\"Class\")\n```\n\n::: {.cell-output-display}\n![](class_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n## Lecture: Social class\n\n[[slides]](../slides/lec8/lec8.pdf)\n\nLecture extended these ideas to various definitions of social class and other hierarchies beyond income.\n\n\n{{< video https://www.youtube.com/embed/nLYpOCwjtVI >}}\n\n",
    "supporting": [
      "class_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}